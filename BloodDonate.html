<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<link rel="stylesheet" th:href="@{/CSS/BloodDonate.css}">
<script type="text/javascript" th:src="@{https://code.jquery.com/jquery-1.7.2.min.js}"></script> 
<link rel="stylesheet" th:href="@{https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css}"> 
<title>Blood Donate</title>
</head>
<body>
<div class="container">
	<form th:action="@{/Donate}" method="get" th:object="${bloodDonate}" >
            <h2>Donate Now</h2>
            <br>
            <hr>
            <div class="inputfield">
            <input placeholder="Your Id" name="donorId" id="did" type="hidden" th:value="${session.DId}" required>
            </div>
         
            <div class="inputfield">
            <label>Donor Name :</label> 
            <input type="text" placeholder="Your Name" name="donatorName" id="dname" th:value="${session.DName}" required>
            </div>
            <div class="inputfield">
            <span id="name-error"></span>
            </div>
            
            
            <div class="inputfield">
            <label>Quantity(in unit) :</label> 
            <input type="number" placeholder="1-3" name="quantity" id="quantity" onkeyup="quantityValidation()" th:field="*{quantity}" required>
            </div>
            <div class="inputfield">
            <span id="quantity-error"></span>
            </div>
            
            <div class="inputfield">
            <label>Mobile Number</label><br> 
		    <input type="tel" placeholder="Your Mobile Number" name="mobileNumber" id="mobilenumber" th:value="${session.DonorMobile}" onkeyup="mobileNoValidation()" required>
            </div>
            <div class="inputfield">
            <span id="mobile-error"></span>
            </div>
            
            <div class="inputfield">
            <label>Blood Group</label> 
		    <input type="text" name="bloodGroup" id="bloodgroup" class="bloodgroup" th:value="${session.BloodGroup}" onkeyup="bloodGroupValidation()" required>
            </div>
            <div class="inputfield">
            <span id="bgroup-error"></span>
            </div>
             
            <div class="inputfield">           
            <label>BloodBank Code :</label> 
            <input type="number" name="bloodBankId" placeholder= "BloodBank Code" id="bloodBankId" th:value="${session.BloodBankId}" onkeyup="bloodBankIdValidation()" required>
            </div>
            <div class="inputfield">
            <span id="bloodbankid-error"></span>
            </div>
            
            <div class="inputfield" id="date">           
            <label>Donate Date:</label> 
            <input type="date" name="donateDate" placeholder= "Last Donate Date" id="donateDate" th:value="${session.DonateDate}">
            </div>
                        
            <button  id='button' type="submit" onclick="validateForm()">Donate Now</button>
            <span id="submit-error"></span>
            <div class="button1">
            <button type="button" value="back" onclick="history.go(-1);">Go Back</button>
            </div>		    
	</form>
</div>
<script>
	window.onload = function() {
		var donatedDate = document.getElementById('donateDate').value;
		var date1 = new Date(donatedDate).getTime();
		var date2 = new Date().getTime();
		var afterDate = date1 + 7776000000;

		if (afterDate >= date2) {
			document.getElementById('button').style.visibility = 'hidden';
		} else {
			document.getElementById('button').style.visibility = 'visible';
		}
	}
</script>
<script th:src="@{/JavaScript/DonateValidation.js}"></script>
</body>
</html>